################################################################
#  Documented with reference to Leinecker's Color App example  #
################################################################

openapi: 3.0.0

info:
    description: A Simple Contact Manager's API Documentation
    version: 1.0.0
    title: A Simple Contact Manager
    contact:
        email: 'joeyhodson@knights.ucf.edu'
    license:
        name: Apache 2.0
        url: http://www.apache.org/licenses/LICENSE-2.0.html

paths:
    # The two login apis likely need some sort of authentication
    # embedded in definitions below
    /login/login.php:
        post:
            tags:
                - Users
            summary: Logs user into contact manager
            operationId: userLogin
            description: Logs user into contact manager
            security: []    # No security required
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - username
                                - password
                            properties:
                                username:
                                    type: string
                                password:
                                    type: string
                                    format: password
            responses:
                200:
                    description: Logged in successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    token:
                                        type: string
                                        format: jwt
                                        description: JSON web token used for future requests
                401:
                    $ref: '#/components/responses/UnauthorizedError'
                404:
                    description: URL Not Found
    /login/registerUser.php:
        post:
            tags:
                - Users
            summary: Creates new user and registers them in the application
            operationId: registerUser
            description: Adds a user to the manager's database
            security: []    # No security required
            # consumes:
            #     - application/json
            # produces:
            #     - application/json
            parameters:
                username:
                    in: query
                    type: string
                password:
                    in: query
                    type: string
            responses:
                200:
                    description: OK
                404:
                    description: URL Not Found
    /contacts/createContact.php:
        post:
            tags:
                - Contact
            summary: Adds a contact
            operationId: createContact
            description: Adds a contact to the manager's database
            # consumes:
            #     - application/json
            # produces:
            #     - application/json
            parameters:
                - name: contactObject
                  in: query
                  description: Add Contact
                  schema:
                      $ref: '#definitions/Contact'
            responses:
                200:
                    description: OK
                401:
                    $ref: '#/components/responses/UnauthorizedError'
                404:
                    description: URL Not Found
    # rework editContact
    /contacts/editContact.php:
        put:
            tags:
                - Edit
            summary: Edits a contact
            operationId: editContact
            description: Edits a specific contact
            # consumes:
            #     - application/json
            # produces:
            #     - application/json
            parameters:
                - name: contactObject
                  in: query
                  description: Contact to be edited
                  schema:
                      $ref: '#/definitions/Contact'
            responses:
                200:
                    description: OK
                401:
                    $ref: '#/components/responses/UnauthorizedError'
                404:
                    description: URL Not Found
    # rework removeContact
    /contacts/removeContact.php:
        delete:
            tags:
                - Remove
            summary: Removes a contact
            operationId: removeContact
            description: Removes a specific contact
            # consumes:
            #     - application/json
            # produces:
            #     - application/json
            parameters:
                - name: contactObject
                  in: query
                  description: Contact to be removed
                  schema:
                      $ref: '#/definitions/Contact'
            responses:
                200:
                    description: OK
                401:
                    $ref: '#/components/responses/UnauthorizedError'
                404:
                    description: URL Not Found
    /contacts/searchContact.php:
        get:
            tags:
                - Search
            summary: Searches contacts
            operationId: searchContact
            description: Searches for contact within the manager's database
            # consumes:
            #     - application/json
            # produces:
            #     - application/json
            parameters:
                - name: searchObject
                  in: query 
                  description: Contact Search
                  schema:
                      $ref: '#/definitions/Search'
            responses:
                200:
                    description: OK
                401:
                    $ref: '#/components/responses/UnauthorizedError'
                404:
                    description: URL Not Found
components:
    securitySchemes:
        bearerAuth:
            type: http
            scheme: bearer
            bearerFormat: JWT
    responses:
        UnauthorizedError:
            description: Access token is missing or invalid
    Contact:
        type: object
        required:
        - firstName
        # - lastName
        - userID
        - dateCreated
        - id
        properties:
            firstName:
                type: string
                example: John
            lastName:
                type: string
                example: Doe
            phoneNumber:
                type: string
                example: 123-456-7890
            email:
                type: string
                example: you@mail.com
            dateCreated:
                type: string
                format: date-time
                example: '2016-08-29T09:12:33.001Z'
            userID:
                description: ID of owner/user
                type: integer
                example: 1
            id:
                description: Unique identifier for this contact
                type: integer
                example: 1
    User:
        type: object
        required:
        - username
        # - userID
        - password
        properties:
            username:
                type: string
                example: username123
            userID:
                type: integer
                example: 1
                default: -1
            password:
                type: string
                example: 9dfgs687sd

security:
    - bearerAuth: []
host: http://cop4331-2023.xyz/
basePath: /service
schemes:
    - https